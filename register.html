<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register Page</title>

    <!-- css -->
    <link rel="stylesheet" href="css/auth.css" />

    <link rel="stylesheet" href="css/footer.css" />

    <link rel="stylesheet" href="css/alert.css" />
    <!-- icon -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <nav class="navbar">
      <a href="index.html">Lil Kumar</a>
      <a href="index.html">
        <button class="cta-btn">
          <i class="fa-solid fa-house"></i>
          Home
        </button>
      </a>
    </nav>
    <header>
      <!-- alert box -->
      <div class="alert-box" id="alert-box">
        <div class="alert-header">
          <h3>
            <i class="fa-solid fa-triangle-exclamation"></i>
            Alert Box
          </h3>
          <i class="fa-solid fa-circle-xmark"></i>
        </div>
        <p class="alert" id="alertmsg">Please login first</p>
        <div class="loading-line">
          <div class="loading" id="loading"></div>
        </div>
      </div>
      <nav class="header-nav">
        <div class="circles-wrapper">
          <div class="circle active">1</div>
          <hr />

          <div class="circle">2</div>
          <hr />

          <div class="circle">3</div>
        </div>
        <img src="img/register.png" alt="auth-img" width="300" />
      </nav>
      <aside>
        <form>
          <h1>Register Page</h1>
          <div class="input-form-wrapper">
            <label for="name">Username</label>
            <div class="input-wrapper">
              <i class="fa-solid fa-user"></i>
              <input type="text" placeholder="Name" id="name" required />
            </div>

            <label for="email">Email</label>
            <div class="input-wrapper">
              <i class="fa-solid fa-envelope"></i>
              <input type="email" placeholder="Email@example.com" id="email" required />
            </div>

            <label for="password">Password</label>
            <div class="input-wrapper">
              <i class="fa-solid fa-key"></i>
              <input type="password" placeholder="Password" id="password" required />
              <i class="fa-solid fa-eye pointer"></i>
            </div>

            <label for="checkpassword">Recheck Password</label>
            <div class="input-wrapper">
              <i class="fa-solid fa-key"></i>
              <input type="password" placeholder="Recheck Password" id="checkpassword" required />
              <i class="fa-solid fa-eye pointer"></i>
            </div>

            <nav class="auth-links">
              <a href="login.html">Already have an account ? <span>Sign In</span></a>
            </nav>
            <button type="button" onclick="register()" class="btn-wrap">Sign Up</button>
          </div>
        </form>
      </aside>
    </header>
    <footer class="footer">
      <nav class="footer-nav">
        <h1>Get the Best Experience on the APP</h1>
        <img src="img/footer-img.png" alt="footer-img-1" />
        <img src="img/footer-img-2.png" alt="footer-img-2" />
      </nav>
      <hr class="footer-hr" />

      <nav class="footer-nav-2">
        <section class="footer-section">
          <h2>About Us</h2>
          <ul>
            <li>
              <a href="about.html">About Us</a>
            </li>
            <li>
              <a href="#">Product & Service</a>
            </li>
          </ul>
        </section>

        <section class="footer-section">
          <h2>Help & Support</h2>
          <ul>
            <li>
              <a href="#">Feedback</a>
            </li>
            <li>
              <a href="#">FAQ</a>
            </li>
          </ul>
        </section>
        <section class="footer-section">
          <h2>Terms of Service</h2>
          <ul>
            <li>
              <a href="#">Privacy Policy</a>
            </li>
            <li>
              <a href="#">Terms of Service</a>
            </li>
          </ul>
        </section>
        <section class="footer-section">
          <button>
            <i class="fa-solid fa-globe"></i>
            English
            <i class="fa-solid fa-caret-up"></i>
          </button>
        </section>
      </nav>

      <section class="footer-section flex" id="about-footer">
        <article class="footer-textbox">
          <h3>Copyright Â© 2024 Lil Kumar All Rights Reserved</h3>
          <p>
            We use cookies to improve your experience on this site. By continuing to use our website, you agree to our use of cookies. Learn more
            <a href="#"> Lil Kumar Privacy Policy </a>
          </p>
        </article>
        <nav class="sosmed-nav">
          <a href="#">
            <i class="fa-brands fa-x-twitter"></i>
          </a>

          <a href="#">
            <i class="fa-brands fa-instagram"></i>
          </a>

          <a href="#">
            <i class="fa-brands fa-youtube"></i>
          </a>

          <a href="#">
            <i class="fa-brands fa-facebook"></i>
          </a>
        </nav>
      </section>
    </footer>

    <script>
      const register = () => {
        const username = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        const checkpassword = document.getElementById("checkpassword").value;

        fetch("https://api-komentar-pengunjung.desafintech.com/api/users/signup", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            username: username,
            email: email,
            password: password,
          }),
        }).then((response) => {
          if (response.status !== 400) {
            if (password !== checkpassword) {
              alertHandler("Password not match");
            } else {
              response.json();
              window.location.href = "login.html";
            }
          } else {
            alertHandler("Please fill in all Form");
          }
        });
      };

      const alertHandler = (msg) => {
        const alertBox = document.getElementById("alert-box");
        alertBox.style.top = "20%";
        const loading = document.getElementById("loading");
        loading.style.animation = "alertLoadingAnimation 2s ease";
        const alertmsg = document.getElementById("alertmsg");
        alertmsg.innerHTML = msg;
        setTimeout(() => {
          alertBox.style.top = "-10%";
          loading.style.animation = "none";
        }, 2000);
      };
    </script>
  </body>
</html>
